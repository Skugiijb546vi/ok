name: Direct_To_HuggingFace_Fast
on:
  workflow_dispatch:
    inputs:
      video_url:
        description: 'Direct Link (Seedr)'
        required: true
      file_name:
        description: 'Ù†Ø§ÙˆÛŒ ÙØ§ÛŒÙ„Û•Ú©Û• Ù„Û•Ù†Ø§Ùˆ Hugging Face'
        required: true
        default: 'video_from_seedr.mp4'

jobs:
  upload_job:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ—ï¸ Setup Tools
        run: |
          sudo apt-get update -qq
          sudo apt-get install -y aria2 -qq
          pip install -q huggingface_hub

      - name: â¬‡ï¸ Fast Download
        run: |
          # Ø¨Û•Ú©Ø§Ø±Ù‡ÛÙ†Ø§Ù†ÛŒ aria2 Ø¨Û† Ø¯Ø§Ú¯Ø±ØªÙ†ÛŒ Ø®ÛØ±Ø§ Ú•ÛÚ© ÙˆÛ•Ú© Ú©Û†Ø¯Û•Ú©Û•ÛŒ Ø®Û†Øª
          aria2c --max-connection-per-server=16 --split=16 -o "video.mp4" "${{ github.event.inputs.video_url }}"

      - name: ğŸš€ Upload to Hugging Face
        env:
          HF_TOKEN: ${{ secrets.HF_TOKEN }}
        run: |
          python3 -c "
          import os
          from huggingface_hub import HfApi
          
          # ÙˆÛ•Ø±Ú¯Ø±ØªÙ†ÛŒ ØªÛ†Ú©Ù† Ù„Û• Ø³ÛØªÛŒØªÙ†Ú¯Ø³
          token = os.getenv('HF_TOKEN')
          if not token:
              print('âŒ Error: HF_TOKEN is missing in GitHub Secrets!')
              exit(1)
              
          api = HfApi()
          repo_id = 'Sarkoakram/sarko761'
          file_name = '${{ github.event.inputs.file_name }}'
          
          print(f'ğŸ“¤ Sending to Hugging Face: {file_name}...')
          
          api.upload_file(
              path_or_fileobj='video.mp4',
              path_in_repo=file_name,
              repo_id=repo_id,
              repo_type='dataset',
              token=token
          )
          print('âœ… Done! Check your Hugging Face repo.')
          "
